{"version":3,"sources":["webpack:///./src/base/switches/switches.vue","webpack:///./src/base/switches/switches.vue?1873","webpack:///./src/base/switches/switches.vue?13ca","webpack:///./src/components/home/mall/mall.vue","webpack:///./src/components/home/mall/mall.vue?7c3c","webpack:///./src/components/home/mall/mall.vue?d2f4"],"names":["switches","data","currentIndex","props","list","type","Array","default","computed","methods","selectClass","index","this","switchItem","$emit","switches_switches","render","_vm","_h","$createElement","_c","_self","staticClass","_l","item","on","click","$event","class","_v","className","domProps","textContent","_s","name","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","mall","loading","switchVal","pullUp","switchList","components","Loading","Switches","Scroll","scroll_scroll","NoResult","no_result","mixins","mixin","created","setShopList","mallList","searchMore","extends_default","Object","vuex_esm","search","callback","_this","shopList","page","then","ops","code","config","result","concat","content","hasMore","last","call","console","log","selectItem","obj","array","image","spliceImgUrl","sowingMap","price","setCurrentShop","$router","push","path","id","query","category","handleShopBar","_this2","$nextTick","bottom","length","shopBarHeight","$refs","style","scroll","refresh","imgUrl","url","stock","watch","newVal","scrollTo","mall_mall","ref","attrs","directives","rawName","value","expression","scrollToEnd","src","logo","title"],"mappings":"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","file":"static/js/8.bbc48bc554358a4faca0.js","sourcesContent":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nexport default {\n  data(){\n    return {\n      currentIndex: 0\n    }\n  },\n  props: {\n    list: {\n      type: Array,\n      default: []\n    }\n  },\n  computed: {},\n  methods: {\n    selectClass(index){\n      return this.currentIndex === index ? 'selected' : '';\n    },\n    switchItem(index){\n      this.currentIndex = index;\n      this.$emit('switchItem',index);\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/base/switches/switches.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"switches\"},[_c('ul',{staticClass:\"switches-list\"},_vm._l((_vm.list),function(item,index){return _c('li',{staticClass:\"item\",on:{\"click\":function($event){_vm.switchItem(index)}}},[_c('div',{class:['line',_vm.selectClass(index)]}),_vm._v(\" \"),_c('div',{staticClass:\"icon-box\"},[_c('div',{class:['icon',item.className]})]),_vm._v(\" \"),_c('span',{staticClass:\"text\",domProps:{\"textContent\":_vm._s(item.name)}})])}))])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-b1a69ae0\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/base/switches/switches.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-b1a69ae0\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vux-loader/src/style-loader.js!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./switches.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vux-loader/src/script-loader.js!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./switches.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-b1a69ae0\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../node_modules/vux-loader/src/template-loader.js!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./switches.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-b1a69ae0\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/base/switches/switches.vue\n// module id = null\n// module chunks = ","//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nlet size = 10;\nimport {mapGetters,mapMutations} from 'vuex';\nimport {shopBarMixin,searchMoreMixin,imgUrlMixin} from 'common/js/mixin'\nimport NoResult from 'base/no-result/no-result'\nimport Loading from 'base/loading/loading'\nimport Scroll from 'base/scroll/scroll';\nimport Switches from 'base/switches/switches';\nimport {findMallList} from 'api/shopList';\nimport {copyObj} from 'common/js/array';\nimport {ERR_OK,baseURL} from 'api/config';\nexport default {\n  data(){\n    return {\n      loading: false,\n      switchVal: 0,\n      pullUp: true,\n      switchList: [\n        {name: '生活用品类', className: 'life'},\n        {name: '服务类', className: 'service'},\n        {name: '家电类', className: 'jd'},\n        {name: '鞋服类', className: 'shoes'}\n      ]\n    }\n  },\n  components: {\n    Loading,\n    Switches,\n    Scroll,\n    NoResult\n  },\n  mixins: [shopBarMixin, searchMoreMixin,imgUrlMixin],\n  created(){\n    this.setShopList(this.mallList);\n    this.searchMore();\n  },\n  computed: {\n    ...mapGetters([\n      'mallList',\n      'shopBarHeight'\n    ])\n  },\n  methods: {\n    search(callback){\n      findMallList(this.switchVal, this.page, size).then((ops) => {\n        if (ops.code === ERR_OK) {\n          this.result = this.result.concat(ops.data.content);\n          this.hasMore = ops.data.last?false : true;\n          this.loading=true;\n          typeof callback === 'function' && callback.call(this);\n          console.log(ops.data)\n        }\n      })\n    },\n    selectItem(item){\n      let obj=copyObj(item);\n      obj.image = this.spliceImgUrl(obj.image);\n      obj.sowingMap=this.spliceImgUrl(obj.sowingMap);\n      obj.price=obj.price/100;\n      this.setCurrentShop(obj);\n      this.$router.push({path:`/home/mall/commodity/${obj.id}`,query:{category:this.switchVal}});\n    },\n    handleShopBar(shopList){\n      this.$nextTick(() => {\n        let bottom = shopList.length > 0 ? `${this.shopBarHeight}px` : '';\n        this.$refs.mall.style.bottom = bottom;\n        this.$refs.scroll.refresh();\n      });\n    },\n    imgUrl(url){\n      return url != null ? `${baseURL}/rwlmall/images/${url}` : '';\n    },\n    price(price){\n      return `¥ ${price/100}`\n    },\n    stock(stock){\n      return `库存:${stock}件`\n    },\n    switchItem(index){\n      this.switchVal = index;\n    },\n    ...mapMutations({\n      setShopList: 'SET_SHOP_LIST',\n      setCurrentShop: 'SET_CURRENT_SHOP'\n    })\n  },\n  watch: {\n    switchVal(newVal){\n      this.$refs.scroll.scrollTo(0, 0); //switch变化时，滚动条到顶部\n      this.loading=false;\n      this.hasMore = true;\n      this.page = 0;\n      this.result = [];\n      this.searchMore();\n    }\n  }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/home/mall/mall.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"mall\",staticClass:\"mall\"},[_c('div',{staticClass:\"bg-image\"}),_vm._v(\" \"),_c('switches',{attrs:{\"list\":_vm.switchList},on:{\"switchItem\":_vm.switchItem}}),_vm._v(\" \"),_c('no-result',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.result.length>0&&_vm.loading),expression:\"!result.length>0&&loading\"}],staticClass:\"zh-center\"}),_vm._v(\" \"),_c('scroll',{ref:\"scroll\",attrs:{\"data\":_vm.result,\"pullUp\":_vm.pullUp},on:{\"scrollToEnd\":_vm.searchMore}},[_c('ul',{staticClass:\"mall-list\"},[_vm._l((_vm.result),function(item){return _c('li',{staticClass:\"mall-item\",on:{\"click\":function($event){_vm.selectItem(item)}}},[_c('div',{staticClass:\"img-box\"},[_c('img',{attrs:{\"src\":_vm.imgUrl(item.logo)}})]),_vm._v(\" \"),_c('span',{staticClass:\"name\",domProps:{\"textContent\":_vm._s(item.name)}}),_vm._v(\" \"),_c('div',{staticClass:\"info-box\"},[_c('span',{staticClass:\"price\",domProps:{\"textContent\":_vm._s(_vm.price(item.price))}}),_vm._v(\" \"),_c('span',{staticClass:\"stock\",domProps:{\"textContent\":_vm._s(_vm.stock(item.stock))}})])])}),_vm._v(\" \"),_c('loading',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.hasMore),expression:\"hasMore\"}],attrs:{\"title\":\"\"}})],2)]),_vm._v(\" \"),_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1c2077a2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vux-loader/src/before-template-compiler-loader.js!./node_modules/vux-loader/src/template-loader.js!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/home/mall/mall.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1c2077a2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vux-loader/src/style-loader.js!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./mall.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vux-loader/src/script-loader.js!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./mall.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1c2077a2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vux-loader/src/before-template-compiler-loader.js!../../../../node_modules/vux-loader/src/template-loader.js!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./mall.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1c2077a2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/home/mall/mall.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}