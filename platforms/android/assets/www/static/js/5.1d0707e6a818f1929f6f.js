webpackJsonp([5,16,17],{"7SXy":function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i={data:function(){return{indexArr:[0,1,2],index:1}},methods:{styleColor:function(t){return"color:"+(this.index===t?"#00B9EF":"")},selectItem:function(t){var s=Number(t.currentTarget.dataset.index);this.index=s,this.$emit("switchItem",s)}}},n={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"switch"},[e("div",{staticClass:"switch-item",attrs:{"data-index":"0"},on:{click:t.selectItem}},[e("i",{staticClass:"icon iconfont icon-fanhui"}),t._v(" "),e("span",[t._v("返回")])]),t._v(" "),e("div",{staticClass:"switch-item",style:t.styleColor(1),attrs:{"data-index":"1"},on:{click:t.selectItem}},[e("i",{staticClass:"icon iconfont icon-rili"}),t._v(" "),e("span",{staticClass:"text"},[t._v("历史订单")])]),t._v(" "),e("div",{staticClass:"switch-item",style:t.styleColor(2),attrs:{"data-index":"2"},on:{click:t.selectItem}},[e("i",{staticClass:"icon iconfont icon-xunhuan"}),t._v(" "),e("span",{staticClass:"text"},[t._v("进行中")])])])},staticRenderFns:[]};var r=e("VU/8")(i,n,!1,function(t){e("jG/S")},"data-v-2aa5a722",null);s.default=r.exports},Ay8H:function(t,s){},MtFf:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("Dd8w"),n=e.n(i),r=e("NYxO"),a=e("T452"),c=e("qwAB"),o=e("F4+m"),l={data:function(){return{pullUp:!0}},components:{Scroll:c.a},props:{list:{type:Array,default:[]},hasMore:{type:Boolean,default:!1}},mixins:[o.a],methods:n()({payOrderClick:function(t,s){this.$router.push({name:"orders-payChose",query:{totalPrice:s},params:{id:t}})},cancelOrderClick:function(t){var s=this;this.$alert("您确定取消该订单吗",["确定","取消"]).then(function(){s._cancelOrder(s.judgeTypeUrl(t),t).then(function(){s.$emit("finishReload")})})},finishOrderClick:function(t){var s=this;this.$alert("您确定完结该订单吗",["确定","取消"]).then(function(){s._finishOrder(s.judgeTypeUrl(t),t).then(function(){s.$emit("finishReload")})})},scrollTop:function(){this.$refs.scroll.scrollTo(0,0)},searchMore:function(){this.$emit("searchMore")},judgeType:function(t){switch(t.slice(-3)){case a.d.laundry:return"laundryProduct";case a.d.mall:return"mallProduct";case a.d.furniture:return"furnitureProduct"}},imgUrl:function(t){return null!=t?a.c+"/rwlmall/images/"+t:""},totalPrice:function(t){var s=this.judgeType(t.id),e=0;return t.items.forEach(function(t){e+=t.count*t[s].price}),e/100},price:function(t){return"¥ "+t/100},standard:function(t){return t?"净含量："+t:""},checkProgress:function(t,s){var e=this.judgeType(t.id);this.$router.push({path:"/orders/details",query:{totalPrice:s,type:e}}),this.setSelectItem(t)}},Object(r.c)({setSelectItem:"SET_SELECT_ITEM"}))},u={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"orders-list"},[e("scroll",{ref:"scroll",attrs:{data:t.list,pullUp:t.pullUp},on:{scrollToEnd:t.searchMore}},[e("ul",[t._l(t.list,function(s){return e("li",{staticClass:"item"},[t._l(s.items,function(i){return e("div",{staticClass:"item-info"},[e("img",{attrs:{src:""}}),t._v(" "),e("div",{staticClass:"wrapper"},[e("div",{staticClass:"price-container"},[e("span",{staticClass:"name",domProps:{textContent:t._s(i[t.judgeType(s.id)].name)}}),t._v(" "),e("span",{staticClass:"price",domProps:{textContent:t._s(t.price(i[t.judgeType(s.id)].price))}})]),t._v(" "),e("div",{staticClass:"number-container"},[e("span",{staticClass:"name",domProps:{textContent:t._s(t.standard(i[t.judgeType(s.id)].standard))}}),t._v(" "),e("span",{staticClass:"number"},[t._v("x"+t._s(i.count))])])])])}),t._v(" "),e("p",{staticClass:"price-sum"},[e("span",{staticClass:"text"},[t._v("共"+t._s(s.items.length)+"件商品合计：\n      ")]),e("span",{staticClass:"sum"},[t._v("¥ "+t._s(t.totalPrice(s)))])]),t._v(" "),e("div",{staticClass:"button-container"},[0===s.payStatus&&0===s.status?e("span",{staticClass:"pay",on:{click:function(e){t.payOrderClick(s.id,t.totalPrice(s))}}},[t._v("付款")]):t._e(),t._v(" "),0===s.status?e("span",{staticClass:"cancel",on:{click:function(e){t.cancelOrderClick(s.id)}}},[t._v("取消订单")]):t._e(),t._v(" "),e("span",{staticClass:"check",on:{click:function(e){t.checkProgress(s,t.totalPrice(s))}}},[t._v("查看进度")]),t._v(" "),4===s.status?e("span",{staticClass:"finish",on:{click:function(e){t.finishOrderClick(s.id)}}},[t._v("完结订单")]):t._e()])],2)}),t._v(" "),e("loading",{directives:[{name:"show",rawName:"v-show",value:t.hasMore,expression:"hasMore"}]})],2)])],1)},staticRenderFns:[]};var d=e("VU/8")(l,u,!1,function(t){e("en3Q")},"data-v-4258ea70",null);s.default=d.exports},en3Q:function(t,s){},"jG/S":function(t,s){},zzBU:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("Dd8w"),n=e.n(i),r=e("NYxO"),a=e("MtFf"),c=e("7SXy"),o=e("tRvw"),l=e("Z5Fx"),u=e("T452"),d={name:"orders",data:function(){return{isLoading:!0,orderList:[],result:[],hasMore:!0,switchVal:1,page:0}},created:function(){this._findFinishOrders()},components:{OrdersList:a.default,OSwitch:c.default,NoResult:o.a},computed:n()({},Object(r.b)(["isFinish"])),methods:n()({ordersFn:function(t,s){t===u.b&&(this.isLoading=!1,this.orderList=s,this.searchMore())},_findConductOrders:function(){var t=this;this.isLoading=!0,Object(l.b)().then(function(s){t.ordersFn(s.code,s.data)})},_findFinishOrders:function(){var t=this;this.isLoading=!0,Object(l.c)().then(function(s){t.ordersFn(s.code,s.data)})},searchMore:function(){this.hasMore&&(this.page++,this.result=this.result.concat(this.orderList.slice(5*(this.page-1),5*this.page)),this.hasMore=!(this.result.length>=this.orderList.length))},switchItem:function(t){this.switchVal=t},finishReload:function(){this.result=[],this.hasMore=!0,this.page=0,this._findConductOrders(),this.setIsFinish(!1)}},Object(r.c)({setSelectItem:"SET_SELECT_ITEM",setIsFinish:"SET_IS_FINISH"})),watch:{$route:function(t,s){2===this.switchVal&&"/orders/details"===s.path&&!0===this.isFinish&&(this.setSelectItem([]),this.finishReload())},switchVal:function(t){var s=this;switch(this.hasMore=!0,this.page=0,this.result=[],this.$nextTick(function(){s.$refs.ordersList&&s.$refs.ordersList.scrollTop()}),t){case 0:this.$router.back();break;case 1:this._findFinishOrders();break;case 2:this._findConductOrders()}}}},h={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"orders",on:{touchmove:function(t){t.preventDefault()}}},[t.isLoading?e("loading"):e("div",[e("orders-list",{directives:[{name:"show",rawName:"v-show",value:t.result.length>0,expression:"result.length>0"}],ref:"ordersList",attrs:{list:t.result,hasMore:t.hasMore},on:{finishReload:t.finishReload,searchMore:t.searchMore}}),t._v(" "),e("no-result",{directives:[{name:"show",rawName:"v-show",value:!t.result.length>0,expression:"!result.length>0"}],staticClass:"zh-center",attrs:{title:"暂无订单记录"}})],1),t._v(" "),e("o-switch",{on:{switchItem:t.switchItem}}),t._v(" "),e("router-view")],1)},staticRenderFns:[]};var f=e("VU/8")(d,h,!1,function(t){e("Ay8H")},"data-v-41a15835",null);s.default=f.exports}});
//# sourceMappingURL=5.1d0707e6a818f1929f6f.js.map