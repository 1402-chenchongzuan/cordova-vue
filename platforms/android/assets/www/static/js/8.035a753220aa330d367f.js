webpackJsonp([8],{AyDw:function(t,s,e){"use strict";var i={data:function(){return{currentIndex:0}},props:{list:{type:Array,default:[]}},computed:{},methods:{selectClass:function(t){return this.currentIndex===t?"selected":""},switchItem:function(t){this.currentIndex=t,this.$emit("switchItem",t)}}},a={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"switches"},[e("ul",{staticClass:"switches-list"},t._l(t.list,function(s,i){return e("li",{staticClass:"item",on:{click:function(s){t.switchItem(i)}}},[e("div",{class:["line",t.selectClass(i)]}),t._v(" "),e("div",{staticClass:"icon-box"},[e("div",{class:["icon",s.className]})]),t._v(" "),e("span",{staticClass:"text",domProps:{textContent:t._s(s.name)}})])}))])},staticRenderFns:[]};var n=e("VU/8")(i,a,!1,function(t){e("LH09")},"data-v-b1a69ae0",null);s.a=n.exports},FQ2S:function(t,s){},LH09:function(t,s){},xMZZ:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var i=e("Dd8w"),a=e.n(i),n=e("NYxO"),c=e("F4+m"),l=e("tRvw"),r=e("y/jF"),o=e("qwAB"),h=e("AyDw"),u=e("mK0g"),m=e("qC9r"),d=e("T452"),p={data:function(){return{loading:!1,switchVal:0,pullUp:!0,switchList:[{name:"生活用品类",className:"life"},{name:"服务类",className:"service"},{name:"家电类",className:"jd"},{name:"鞋服类",className:"shoes"}]}},components:{Loading:r.a,Switches:h.a,Scroll:o.a,NoResult:l.a},mixins:[c.f,c.d,c.b],created:function(){this.setShopList(this.mallList),this.searchMore()},computed:a()({},Object(n.b)(["mallList","shopBarHeight"])),methods:a()({search:function(t){var s=this;Object(u.c)(this.switchVal,this.page,10).then(function(e){e.code===d.b&&(s.result=s.result.concat(e.data.content),s.hasMore=!e.data.last,s.loading=!0,"function"==typeof t&&t.call(s),console.log(e.data))})},selectItem:function(t){var s=Object(m.a)(t);s.image=this.spliceImgUrl(s.image),s.sowingMap=this.spliceImgUrl(s.sowingMap),s.price=s.price/100,this.setCurrentShop(s),this.$router.push({path:"/home/mall/commodity/"+s.id,query:{category:this.switchVal}})},handleShopBar:function(t){var s=this;this.$nextTick(function(){var e=t.length>0?s.shopBarHeight+"px":"";s.$refs.mall.style.bottom=e,s.$refs.scroll.refresh()})},imgUrl:function(t){return null!=t?d.c+"/rwlmall/images/"+t:""},price:function(t){return"¥ "+t/100},stock:function(t){return"库存:"+t+"件"},switchItem:function(t){this.switchVal=t}},Object(n.c)({setShopList:"SET_SHOP_LIST",setCurrentShop:"SET_CURRENT_SHOP"})),watch:{switchVal:function(t){this.$refs.scroll.scrollTo(0,0),this.loading=!1,this.hasMore=!0,this.page=0,this.result=[],this.searchMore()}}},f={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{ref:"mall",staticClass:"mall"},[e("div",{staticClass:"bg-image"}),t._v(" "),e("switches",{attrs:{list:t.switchList},on:{switchItem:t.switchItem}}),t._v(" "),e("no-result",{directives:[{name:"show",rawName:"v-show",value:!t.result.length>0&&t.loading,expression:"!result.length>0&&loading"}],staticClass:"zh-center"}),t._v(" "),e("scroll",{ref:"scroll",attrs:{data:t.result,pullUp:t.pullUp},on:{scrollToEnd:t.searchMore}},[e("ul",{staticClass:"mall-list"},[t._l(t.result,function(s){return e("li",{staticClass:"mall-item",on:{click:function(e){t.selectItem(s)}}},[e("div",{staticClass:"img-box"},[e("img",{attrs:{src:t.imgUrl(s.logo)}})]),t._v(" "),e("span",{staticClass:"name",domProps:{textContent:t._s(s.name)}}),t._v(" "),e("div",{staticClass:"info-box"},[e("span",{staticClass:"price",domProps:{textContent:t._s(t.price(s.price))}}),t._v(" "),e("span",{staticClass:"stock",domProps:{textContent:t._s(t.stock(s.stock))}})])])}),t._v(" "),e("loading",{directives:[{name:"show",rawName:"v-show",value:t.hasMore,expression:"hasMore"}],attrs:{title:""}})],2)]),t._v(" "),e("router-view")],1)},staticRenderFns:[]};var v=e("VU/8")(p,f,!1,function(t){e("FQ2S")},"data-v-1c2077a2",null);s.default=v.exports}});
//# sourceMappingURL=8.035a753220aa330d367f.js.map